from datetime import datetime

from acspype.structures import ACSPacket

TEST_DATA = {
    datetime.datetime(2025, 4, 29, 21, 4, 3, 630908, tzinfo=datetime.timezone.utc): bytearray(b'\xff\x00\xff\x00\x02\xc0\x05\x01S\x00\x00\x0b\x01\xd0\x00\x00\x1c\x87iF\xa7\x04\x01\xdf\x02\xcc\x00%\x9e\xc3\x01T\x02\r\x01\x93\x01\xf0\x01\xb5\x02U\x01\xce\x025\x01\xfa\x02\xa5\x02\x17\x02\x82\x02K\x03\x07\x02n\x02\xe3\x02\xb0\x03x\x02\xd4\x03Q\x03)\x03\xf3\x03A\x03\xd1\x03\xab\x04p\x03\xb5\x04O\x047\x05\x04\x04B\x04\xe5\x04\xe3\x05\xaa\x04\xdc\x05\x8e\x05\xa5\x06l\x05\x93\x06R\x06\x87\x07?\x06S\x071\x07~\x08\x0b\x07\x0b\x08\x06\x08h\x08\xd9\x07\xd1\x08\xdf\tm\t\xba\x08\xaa\t\xc8\n\x8d\n\xbb\t\x9e\n\xd6\x0b\xd5\x0b\xc4\n\x98\x0b\xf4\r$\x0c\xdf\x0b\xae\r\x17\x0e\xa1\x0e\x15\x0c\xc7\x0ei\x10&\x0fL\x0e\x00\x0f\xad\x11\xd9\x10\xc3\x0fg\x119\x13\xd0\x12Q\x10\xda\x12\xe8\x15\xe2\x13\xd9\x12K\x14\x96\x17\xf1\x15{\x13\xec\x16H\x1aK\x172\x15\x81\x18;\x1c\x99\x18\xd8\x17\x16\x1a\x00\x1e\xf3\x1a\x93\x18\xb6\x1b\xe1!\\\x1c*\x1a3\x1d\xa8#\xa0\x1d\xcf\x1b\xe3\x1fc&6\x1f\xb8\x1d\xc5!\x7f)\x15!\x92\x1f\x86#\x97+\xc8#L!H%u.\x89%F#R\'\x931\xb8\'`%n)\xee5\x04)\xbf\'\xf8,j8\xfa,v*\x93/\x81=\x0e.\xe6,\xfe22@\xec1j/\x804\xf0D\xea3\xa81\xc67|H\x9a6\t4L:\x04L\xb48\x7f6\xb0<\xddP\xa2:t8\x95?\x1cS\xd7<n:\xb9A1Ww>{<\xbfC\x94Z\xe2@g>\xdeE\xa2^\x85B\xe4AoH_b\xd6D\xefC\x1cJ\xfae\xc8JzG\xe0P\xbamVLCI\xb9R\xb5p\xaaM\xf5K~T\xb3s\xe3OIL\xecV3v\xa0P\x9aNSW\xbayRQ\xbbO|Y\r{\xabR\xedP\xcaZO~;T\x13R\x07[\xda\x80\xb7TnRz\\\\\x81\xf9TaR\x99\\Y\x82\xafTCR\x8c\\T\x83\'S\xf2RJ\\\n\x83MSiQ\xc9[\x8a\x83\x0cR\xa9Q\x1bZ\xd6\x82{QGO\xc5Y\x8f\x80\xdaO\\M\xd8Wz~FM;K\xc4UB{aJ\xb7InRox\x0bI\\H7P\xc5vxHuG?P8u4F D\xe5M\xcaq\xbaC\x9fBpJ\xe7n\x04A3@\x01HOjR>i=BEAf\x10;\xc7:\xb2BIb\n9:8 ?\x87]\xf76_5><\x81Y[3#1\xf58\xefT\x12/\xe5.\xc95@N\xe3-7,\x1e2FJ\x8d*\xc5)\xa0/\xa4Fz(\x11&\xe0,\xaeA\xfa%[$-)\x9b=\x81"\xd0!\xa0&\xce9G H\x1f\x1d$\x045\x16\x1e\x06\x1c\xdc!s1W\x1b\xf9\x1a\xc6\x1fA-\xdd\x19\xd8\x18\xa5\x1c\xd5*L\xf8\x00\x00'),
    datetime.datetime(2025, 4, 29, 21, 4, 3, 878594, tzinfo=datetime.timezone.utc): bytearray(b'\xff\x00\xff\x00\x02\xc0\x05\x01S\x00\x00\x0b\x01\xd0\x00\x00\x1c\x87iB\xa7\x07\x01\xdf\x02\xcc\x00%\x9f\xbe\x01T\x02\r\x01\x93\x01\xef\x01\xb5\x02T\x01\xcf\x026\x01\xf8\x02\xa6\x02\x18\x02\x83\x02M\x03\x07\x02n\x02\xe4\x02\xb0\x03x\x02\xd4\x03Q\x03\'\x03\xf3\x03@\x03\xd1\x03\xa8\x04n\x03\xb4\x04O\x048\x05\x07\x04A\x04\xe3\x04\xe3\x05\xac\x04\xdc\x05\x92\x05\xa2\x06j\x05\x91\x06O\x06\x87\x07?\x06S\x071\x07}\x08\x0c\x07\n\x08\t\x08h\x08\xd9\x07\xd0\x08\xdc\tl\t\xbd\x08\xa8\t\xcb\n\x8c\n\xbc\t\x9f\n\xd5\x0b\xd4\x0b\xc6\n\x99\x0b\xf4\r%\x0c\xde\x0b\xad\r\x18\x0e\x9f\x0e\x12\x0c\xc8\x0eh\x10%\x0fN\x0e\x00\x0f\xad\x11\xda\x10\xc3\x0fg\x11<\x13\xcf\x12N\x10\xdb\x12\xe5\x15\xe1\x13\xda\x12K\x14\x96\x17\xf1\x15y\x13\xee\x16I\x1aK\x172\x15\x81\x188\x1c\x98\x18\xda\x17\x16\x1a\x00\x1e\xf2\x1a\x92\x18\xb4\x1b\xe1![\x1c(\x1a1\x1d\xa7#\xa0\x1d\xce\x1b\xe7\x1fa&7\x1f\xb6\x1d\xc5!\x7f)\x14!\x92\x1f\x85#\x94+\xc7#L!H%t.\x8b%D#R\'\x921\xb6\'`%m)\xec5\x04)\xc0\'\xf9,m8\xfa,v*\x93/\x7f=\x0f.\xe8,\xfe21@\xec1h/\x804\xf1D\xef3\xa61\xc37yH\x976\x084N:\x04L\xb78~6\xb1<\xdeP\xa1:s8\x94?\x1bS\xd7<m:\xbcA/Wz>x<\xbfC\x93Z\xe1@g>\xe0E\xa2^\x85B\xe3ApH`b\xd7D\xefC\x19J\xf8e\xc6JxG\xe2P\xbamTLBI\xb9R\xb3p\xa9M\xf5K{T\xb4s\xe1OHL\xebV3v\xa0P\x9aNQW\xb8yRQ\xbcOzY\r{\xa9R\xebP\xc8ZN~9T\x14R\x05[\xd9\x80\xb5TnRy\\\\\x81\xf8TaR\x98\\W\x82\xaeTCR\x89\\T\x83&S\xf0RH\\\n\x83KShQ\xc9[\x8c\x83\x0bR\xa8Q\x1cZ\xd7\x82zQHO\xc6Y\x90\x80\xd8O]M\xd8W|~HM<K\xc8UB{aJ\xb6IkRox\tI[H9P\xc5vwHuGAP:u5F D\xe6M\xcaq\xb8C\xa2BoJ\xe7n\x03A4?\xffHOjO>h=BE?f\x0f;\xc7:\xb0BJb\t9;8\x1f?\x8b]\xf86a5=<~Y\\3$1\xf88\xf5T\x14/\xe4.\xc55AN\xe0-7, 2GJ\x90*\xc3)\x9e/\xa5Fx(\x12&\xe5,\xaeA\xfd%[$.)\x9d=\x80"\xd2!\x9f&\xd09E I\x1f\x1c$\x005\x19\x1e\x07\x1c\xdf!w1Z\x1b\xfa\x1a\xc6\x1f@-\xdd\x19\xd9\x18\xa7\x1c\xd7*N\xf8\xca\x00'),
    datetime.datetime(2025, 4, 29, 21, 4, 4, 127108, tzinfo=datetime.timezone.utc): bytearray(b'\xff\x00\xff\x00\x02\xc0\x05\x01S\x00\x00\x0b\x01\xd0\x00\x00\x1c\x87i?\xa6\xff\x01\xdf\x02\xcd\x00%\xa0\xb8\x01T\x02\x0c\x01\x93\x01\xee\x01\xb7\x02T\x01\xce\x025\x01\xf8\x02\xa6\x02\x18\x02\x7f\x02L\x03\x08\x02n\x02\xe2\x02\xb1\x03v\x02\xd2\x03Q\x03(\x03\xf1\x03@\x03\xcf\x03\xa9\x04p\x03\xb5\x04L\x047\x05\x07\x04A\x04\xe3\x04\xe3\x05\xab\x04\xdd\x05\x90\x05\xa4\x06m\x05\x90\x06Q\x06\x87\x07@\x06S\x071\x07}\x08\x0b\x07\x0b\x08\x06\x08i\x08\xda\x07\xcf\x08\xdd\tl\t\xbc\x08\xaa\t\xca\n\x8d\n\xbc\t\xa0\n\xd5\x0b\xd5\x0b\xc6\n\x98\x0b\xf5\r$\x0c\xdd\x0b\xac\r\x16\x0e\xa0\x0e\x15\x0c\xc7\x0eg\x10\'\x0fL\r\xff\x0f\xac\x11\xd8\x10\xc3\x0fg\x119\x13\xd0\x12S\x10\xdc\x12\xe7\x15\xe2\x13\xd8\x12L\x14\x97\x17\xf0\x15y\x13\xee\x16G\x1aN\x172\x15\x80\x188\x1c\x97\x18\xdb\x17\x16\x19\xff\x1e\xf2\x1a\x94\x18\xb6\x1b\xe1!]\x1c)\x1a2\x1d\xa7#\x9f\x1d\xcd\x1b\xe3\x1fb&6\x1f\xb7\x1d\xc4!})\x15!\x90\x1f\x86#\x94+\xc9#N!H%t.\x8b%G#T\'\x911\xb9\'b%m)\xef5\x03)\xc1\'\xfa,i8\xfe,v*\x92/\x82=\x10.\xe9,\xfe21@\xef1l/\x814\xf1D\xed3\xa81\xc47}H\x976\n4N:\x04L\xb88\x826\xb3<\xdeP\xa2:t8\x95?\x1bS\xd8<n:\xbcA0Ww>{<\xbfC\x95Z\xe4@f>\xe1E\xa1^\x88B\xe5AoH_b\xd9D\xf0C\x1aJ\xfbe\xcaJzG\xe0P\xb9mWLAI\xbbR\xb5p\xabM\xf3K~T\xb2s\xe5OHL\xecV4v\xa1P\x97NTW\xb8yTQ\xbaO\x7fY\x0c{\xacR\xebP\xc9ZN~;T\x14R\t[\xd7\x80\xb8TnR{\\[\x81\xfdTbR\x98\\V\x82\xb1TCR\x8d\\S\x83*S\xf0RK\\\x08\x83NSfQ\xc9[\x8a\x83\rR\xa8Q\x1dZ\xd6\x82{QGO\xc8Y\x8d\x80\xdfO^M\xd9W{~HM<K\xc8UC{eJ\xb4IoRlx\x0eI\\H:P\xc4vyHtGDP8u9F\x1fD\xe9M\xc8q\xbbC\xa1BqJ\xe7n\x08A1@\x04HMjT>i=DE>f\x13;\xc9:\xb2BKb\x0b9;8!?\x89]\xf96c5><\x80Y[3"1\xf98\xf0T\x16/\xe4.\xca5=N\xe6-7,!2GJ\x91*\xc3)\x9f/\xa1F{(\x13&\xe4,\xafA\xfc%[$.)\x9c=\x83"\xcf!\xa0&\xcd9H F\x1f\x1e$\x015\x18\x1e\x08\x1c\xe0!t1[\x1b\xfa\x1a\xc8\x1f?-\xdf\x19\xdb\x18\xa5\x1c\xd7*L\xfb]\x00'),
    datetime.datetime(2025, 4, 29, 21, 4, 4, 385997, tzinfo=datetime.timezone.utc): bytearray(b'\xff\x00\xff\x00\x02\xc0\x05\x01S\x00\x00\x0b\x01\xd0\x00\x00\x1c\x87iC\xa7\x06\x01\xdf\x02\xcc\x00%\xa1\xb0\x01T\x02\x0b\x01\x91\x01\xee\x01\xb6\x02U\x01\xcf\x025\x01\xf9\x02\xa5\x02\x16\x02\x83\x02L\x03\n\x02n\x02\xe5\x02\xb0\x03v\x02\xd4\x03P\x03)\x03\xf3\x03@\x03\xd2\x03\xaa\x04p\x03\xb6\x04M\x047\x05\x06\x04B\x04\xe6\x04\xe4\x05\xad\x04\xdd\x05\x91\x05\xa3\x06i\x05\x92\x06O\x06\x87\x07A\x06S\x072\x07}\x08\x0c\x07\n\x08\x07\x08j\x08\xd9\x07\xd0\x08\xdf\tl\t\xbb\x08\xa9\t\xc9\n\x8e\n\xbb\t\xa0\n\xd5\x0b\xd5\x0b\xc6\n\x97\x0b\xf5\r%\x0c\xdf\x0b\xad\r\x1a\x0e\xa0\x0e\x14\x0c\xc7\x0ej\x10\'\x0fM\x0e\x00\x0f\xac\x11\xd8\x10\xc5\x0ff\x11<\x13\xd0\x12R\x10\xdd\x12\xe7\x15\xe2\x13\xd9\x12L\x14\x97\x17\xf2\x15{\x13\xed\x16J\x1aK\x173\x15\x80\x188\x1c\x99\x18\xda\x17\x16\x1a\x01\x1e\xf3\x1a\x93\x18\xb6\x1b\xe1!_\x1c(\x1a1\x1d\xa7#\xa1\x1d\xcf\x1b\xe3\x1fb&7\x1f\xb6\x1d\xc5!\x80)\x16!\x91\x1f\x85#\x96+\xc8#M!H%u.\x8a%F#R\'\x941\xb8\'b%n)\xed5\x02)\xbf\'\xf9,l8\xfd,x*\x93/\x83=\x12.\xe7,\xfd23@\xeb1j/\x804\xf1D\xed3\xaa1\xc47|H\x976\n4L:\x07L\xb58~6\xb3<\xdcP\xa3:s8\x94?\x1bS\xd8<n:\xbbA2Wy>{<\xc0C\x95Z\xe4@i>\xdfE\xa3^\x87B\xe4AmH`b\xd8D\xefC\x1cJ\xfbe\xc8J}G\xe1P\xbcmXLAI\xb8R\xb6p\xa8M\xf5K~T\xb4s\xe4OJL\xecV4v\xa1P\x99NQW\xb9yTQ\xbcO|Y\x0e{\xacR\xebP\xc9ZQ~>T\x14R\x07[\xda\x80\xb6TnRz\\]\x81\xfaTcR\x99\\Y\x82\xb1TBR\x8c\\T\x83)S\xf0RI\\\x0b\x83LSiQ\xc9[\x8c\x83\x0cR\xa7Q\x1eZ\xd7\x82{QIO\xc5Y\x90\x80\xdaO\\M\xdaWz~IM?K\xc7UC{aJ\xb7ImRox\nIZH:P\xc6vwHwG@P9u7F D\xe5M\xcbq\xbaC\xa2BoJ\xe5n\x03A3@\x01HPjR>g=BE@f\x11;\xc7:\xb1BLb\x0b9:8 ?\x8a]\xf96`5@<\x81Y^3$1\xf88\xf2T\x14/\xe3.\xc75?N\xe1-7,\x1e2GJ\x91*\xc4)\xa0/\xa4F{(\x12&\xe3,\xaeA\xfc%Z$/)\x9d=\x83"\xd0!\x9e&\xcc9F I\x1f\x1b$\x025\x18\x1e\x06\x1c\xdd!v1\\\x1b\xfa\x1a\xc6\x1fA-\xdd\x19\xd9\x18\xa6\x1c\xd7*M\xf8y\x00'),
    datetime.datetime(2025, 4, 29, 21, 4, 4, 634146, tzinfo=datetime.timezone.utc): bytearray(b'\xff\x00\xff\x00\x02\xc0\x05\x01S\x00\x00\x0b\x01\xd0\x00\x00\x1c\x87iB\xa7\x05\x01\xe0\x02\xcc\x00%\xa2\xaa\x01T\x02\t\x01\x92\x01\xf0\x01\xb6\x02T\x01\xd0\x025\x01\xf8\x02\xa5\x02\x17\x02\x83\x02L\x03\x08\x02n\x02\xe4\x02\xb0\x03v\x02\xd3\x03R\x03)\x03\xf1\x03A\x03\xd2\x03\xaa\x04o\x03\xb6\x04N\x047\x05\x07\x04C\x04\xe7\x04\xe4\x05\xab\x04\xdc\x05\x92\x05\xa4\x06k\x05\x92\x06O\x06\x88\x07@\x06S\x073\x07}\x08\x0c\x07\x0b\x08\t\x08i\x08\xd9\x07\xd1\x08\xde\tn\t\xb9\x08\xa9\t\xcb\n\x8d\n\xb9\t\x9f\n\xd5\x0b\xd6\x0b\xc6\n\x99\x0b\xf5\r%\x0c\xde\x0b\xae\r\x1b\x0e\xa1\x0e\x13\x0c\xc8\x0eh\x10&\x0fL\r\xff\x0f\xae\x11\xdb\x10\xc3\x0fg\x11;\x13\xd0\x12P\x10\xdc\x12\xe9\x15\xe1\x13\xda\x12K\x14\x97\x17\xf1\x15v\x13\xec\x16H\x1aM\x172\x15\x80\x187\x1c\x97\x18\xdb\x17\x16\x1a\x02\x1e\xf3\x1a\x91\x18\xb4\x1b\xe1!^\x1c(\x1a2\x1d\xa6#\xa2\x1d\xce\x1b\xe3\x1fd&6\x1f\xb6\x1d\xc6!~)\x15!\x8f\x1f\x85#\x95+\xcb#K!H%v.\x8a%E#R\'\x931\xb6\'b%n)\xed5\x04)\xbd\'\xf9,k8\xfc,w*\x92/\x80=\x10.\xe7-\x0024@\xef1i/\x7f4\xf0D\xea3\xa91\xc47{H\x9a6\t4M:\x07L\xb98\x7f6\xb1<\xdfP\xa2:v8\x95?\x1bS\xd9<o:\xbcA3Wx>x<\xbfC\x93Z\xe3@f>\xe2E\xa4^\x88B\xe4AoH`b\xd9D\xefC\x1aJ\xfae\xc9J|G\xe2P\xbcmXLAI\xbaR\xb6p\xabM\xf4K|T\xb4s\xe3OJL\xebV6v\xa2P\x99NRW\xbayUQ\xbeO|Y\x0f{\xabR\xecP\xcaZR~>T\x13R\x05[\xdb\x80\xb5TlRy\\]\x81\xfaTbR\x98\\Y\x82\xb1TDR\x8b\\V\x83\'S\xf1RI\\\x0b\x83MSiQ\xc8[\x8c\x83\x0cR\xa8Q\x1dZ\xd8\x82zQIO\xc5Y\x90\x80\xdbO`M\xdaW}~HM;K\xc6UF{bJ\xb4ImRlx\nI]H8P\xc7vwHwGBP:u7F!D\xe8M\xc8q\xb9C\xa1BqJ\xe7n\x06A1@\x02HOjU>j=BEAf\x11;\xc8:\xb2BLb\n9:8\x1f?\x89]\xf96a5><\x83Y^3\x1f1\xf78\xf0T\x15/\xe5.\xc85?N\xe4-8,\x1f2HJ\x8f*\xc6)\xa0/\xa4Fz(\x14&\xe4,\xb1A\xfb%Z$.)\x9b=\x81"\xd1!\x9f&\xce9F I\x1f\x1f$\x045\x1b\x1e\x07\x1c\xdf!w1X\x1b\xfa\x1a\xc6\x1fB-\xdb\x19\xda\x18\xa5\x1c\xd7*M\xf8\x87\x00')
}

def test():
    stream = bytearray(b'\x02\xcd\x00')
    for dt, full_packet in TEST_DATA.items():
        stream.extend(full_packet)
    stream.extend(b'\xff\x00\xff\x00\x02\xc0\x05\x01S\x00\x00\x0b\x01\xd0')



